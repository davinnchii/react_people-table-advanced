(this["webpackJsonpreact_people-table-advanced"]=this["webpackJsonpreact_people-table-advanced"]||[]).push([[0],{38:function(e,t,r){},39:function(e,t,r){},40:function(e,t,r){"use strict";r.r(t);var n=r(26),c=r(8),a=(r(35),r(36),r(3)),s=r(24),l=r(5),i=r(0),o=r.n(i),j=r(9),d=r(10),u=r.n(d);function b(e,t){var r=new URLSearchParams(e.toString());return Object.entries(t).forEach((function(e){var t=Object(l.a)(e,2),n=t[0],c=t[1];null===c?r.delete(n):Array.isArray(c)?(r.delete(n),c.forEach((function(e){r.append(n,e)}))):r.set(n,c)})),r.toString()}var h=[16,17,18,19,20],O=function(e){return e.All="all",e.Male="male",e.Female="female",e}({}),m=function(e){return e.Name="name",e.Sex="sex",e.Born="born",e.Died="died",e}({}),x=[],p=r(1),f=function(){var e=Object(c.d)(),t=Object(l.a)(e,2),r=t[0],n=t[1],a=r.getAll("centuries")||x,s=r.get("query")||"",i=r.get("sex")||"all";return Object(p.jsxs)("nav",{className:"panel",children:[Object(p.jsx)("p",{className:"panel-heading",children:"Filters"}),Object(p.jsx)("p",{className:"panel-tabs","data-cy":"SexFilter",children:Object.values(O).map((function(e){return Object(p.jsx)(c.b,{className:u()("is-capitalized",{"is-active":i===e}),to:{search:b(r,{sex:"all"===e?null:e[0]})},children:e},e)}))}),Object(p.jsx)("div",{className:"panel-block",children:Object(p.jsxs)("p",{className:"control has-icons-left",children:[Object(p.jsx)("input",{"data-cy":"NameFilter",type:"search",className:"input",placeholder:"Search",value:s,onChange:function(e){!function(e){var t=b(r,e);n(t)}({query:e.target.value})}}),Object(p.jsx)("span",{className:"icon is-left",children:Object(p.jsx)("i",{className:"fas fa-search","aria-hidden":"true"})})]})}),Object(p.jsx)("div",{className:"panel-block",children:Object(p.jsxs)("div",{className:"level is-flex-grow-1 is-mobile","data-cy":"CenturyFilter",children:[Object(p.jsx)("div",{className:"level-left",children:h.map((function(e){var t=e.toString(),n=b(r,{centuries:a.includes(t)?a.filter((function(e){return t!==e})):[].concat(Object(j.a)(a),[t])});return Object(p.jsx)(o.a.Fragment,{children:Object(p.jsx)(c.b,{"data-cy":"century",className:u()("button","mr-1",{"is-info":a.includes(e.toString())}),to:{search:n},children:e})},e)}))}),Object(p.jsx)("div",{className:"level-right ml-4",children:Object(p.jsx)(c.b,{"data-cy":"centuryALL",className:u()("button","is-success",{"is-outlined":a.length}),to:{search:b(r,{centuries:[]})},children:"All"})})]})}),Object(p.jsx)("div",{className:"panel-block",children:Object(p.jsx)(c.b,{className:"button is-link is-outlined is-fullwidth",to:{search:b(r,{query:null,sex:null,centuries:null})},children:"Reset all filters"})})]})},v=(r(38),function(){return Object(p.jsx)("div",{className:"Loader","data-cy":"loader",children:Object(p.jsx)("div",{className:"Loader__content"})})});function g(e,t,r){var n={sort:t,order:r};return n.sort?!n.order&&n.sort&&n.sort===e?(n.order="desc",n):!n.order&&n.sort&&n.sort!==e?(n.sort=e,n):n.order&&n.sort&&n.sort===e?(n.sort=null,n.order=null,n):(n.order&&n.sort&&n.sort!==e&&(n.sort=e,n.order=null),n):(n.sort=e,n)}var N=function(e){var t=e.person;return Object(p.jsx)(c.b,{to:"".concat(t.slug),replace:!0,className:"f"===t.sex?"has-text-danger":"",children:t.name})},y=function(e){var t=e.person,r=Object(a.q)().personSlug,n=t.slug,c=t.sex,s=t.born,l=t.died,i=t.mother,o=t.motherName,j=t.father,d=t.fatherName;return Object(p.jsxs)("tr",{"data-cy":"person",className:u()({"has-background-warning":n===r}),children:[Object(p.jsx)("td",{children:Object(p.jsx)(N,{person:t})}),Object(p.jsx)("td",{children:c}),Object(p.jsx)("td",{children:s}),Object(p.jsx)("td",{children:l}),Object(p.jsx)("td",{children:i?Object(p.jsx)(N,{person:i}):o||"-"}),Object(p.jsx)("td",{children:j?Object(p.jsx)(N,{person:j}):d||"-"})]},n)},w=function(e){var t=e.people,r=Object(c.d)(),n=Object(l.a)(r,1)[0],a=n.get("sort"),s=n.get("order"),o=Object(i.useMemo)((function(){return g}),[a,s]);return Object(p.jsxs)("table",{"data-cy":"peopleTable",className:"table is-striped is-hoverable is-narrow is-fullwidth",children:[Object(p.jsx)("thead",{children:Object(p.jsxs)("tr",{children:[Object.values(m).map((function(e){return Object(p.jsx)("th",{children:Object(p.jsxs)("span",{className:"is-flex is-flex-wrap-nowrap",children:[e[0].toUpperCase()+e.slice(1),Object(p.jsx)(c.b,{to:{search:b(n,{sort:o(e,a,s).sort,order:o(e,a,s).order})},children:Object(p.jsx)("span",{className:"icon",children:Object(p.jsx)("i",{className:u()("fas",{"fa-sort-up":a===e&&!s,"fa-sort-down":a===e&&s,"fa-sort":!a||a!==e})})})})]})},e)})),Object(p.jsx)("th",{children:"Mother"}),Object(p.jsx)("th",{children:"Father"})]})}),Object(p.jsx)("tbody",{children:t.map((function(e){return Object(p.jsx)(y,{person:e})}))})]})},S=r(4),k=r(7),L="https://mate-academy.github.io/react_people-table/api/people.json";function F(e){return new Promise((function(t){return setTimeout(t,e)}))}function A(){return(A=Object(k.a)(Object(S.a)().mark((function e(){return Object(S.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",F(500).then((function(){return fetch(L)})).then((function(e){return e.json()})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function C(e,t){return e.find((function(e){return"f"===e.sex&&e.name===t.motherName}))}function P(e,t){return e.find((function(e){return"m"===e.sex&&e.name===t.fatherName}))}var M=function(){var e=Object(c.d)(),t=Object(l.a)(e,1)[0],r=Object(i.useState)(!0),n=Object(l.a)(r,2),a=n[0],o=n[1],d=Object(i.useState)([]),u=Object(l.a)(d,2),b=u[0],h=u[1],O=Object(i.useState)(!1),g=Object(l.a)(O,2),N=g[0],y=g[1],S=t.get("sort")||"",k=t.get("order")||"",L=t.get("sex")||"all",F=t.get("query")||"",M=t.getAll("centuries")||x;Object(i.useEffect)((function(){o(!0),function(){return A.apply(this,arguments)}().then((function(e){var t=e.map((function(t){return Object(s.a)(Object(s.a)({},t),{},{mother:C(e,t),father:P(e,t)})}));h(t)})).catch((function(){return y(!0)})).finally((function(){return o(!1)}))}),[]);var q=Object(i.useMemo)((function(){return function(e,t,r,n,c,a){var s=Object(j.a)(e);switch(t){case m.Name:case m.Sex:s.sort((function(e,r){return e[t].localeCompare(r[t])}));break;case m.Born:case m.Died:s.sort((function(e,r){return e[t]-r[t]}))}return r&&s.reverse(),"all"!==n&&(s=s.filter((function(e){return e.sex===n}))),c&&(s=s.filter((function(e){return function(e,t){var r,n;return e.name.toLowerCase().includes(t)||(null===(r=e.fatherName)||void 0===r?void 0:r.toLowerCase().includes(t))||(null===(n=e.motherName)||void 0===n?void 0:n.toLowerCase().includes(t))}(e,c.toLowerCase())}))),a.length&&(s=s.filter((function(e){return a.some((function(t){return+t===Math.floor((e.born-1)/100)+1}))}))),s}(b,S,k,L,F,M)}),[S,k,L,F,M]);return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("h1",{className:"title",children:"People Page"}),Object(p.jsx)("div",{className:"block",children:Object(p.jsxs)("div",{className:"columns is-desktop is-flex-direction-row-reverse",children:[Object(p.jsx)("div",{className:"column is-7-tablet is-narrow-desktop",children:Object(p.jsx)(f,{})}),Object(p.jsx)("div",{className:"column",children:Object(p.jsx)("div",{className:"box table-container",children:a?Object(p.jsx)(v,{}):Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(w,{people:q}),N&&Object(p.jsx)("p",{"data-cy":"peopleLoadingError",children:"Something went wrong"}),!b.length&&Object(p.jsx)("p",{"data-cy":"noPeopleMessage",children:"There are no people on the server"}),!q.length&&Object(p.jsx)("p",{children:"There are no people matching the current search criteria"})]})})})]})})]})},q=function(e){var t=e.isActive;return u()("navbar-item",{"has-background-grey-lighter":t})},E=function(){return Object(p.jsx)("nav",{"data-cy":"nav",className:"navbar is-fixed-top has-shadow",role:"navigation","aria-label":"main navigation",children:Object(p.jsx)("div",{className:"container",children:Object(p.jsxs)("div",{className:"navbar-brand",children:[Object(p.jsx)(c.c,{className:q,to:"/",children:"Home"}),Object(p.jsx)(c.c,{"aria-current":"page",className:q,to:"people",children:"People"})]})})})},_=(r(39),function(){return Object(p.jsxs)("div",{"data-cy":"app",children:[Object(p.jsx)(E,{}),Object(p.jsx)("div",{className:"section",children:Object(p.jsx)("div",{className:"container",children:Object(p.jsxs)(a.d,{children:[Object(p.jsx)(a.b,{path:"/",element:Object(p.jsx)("h1",{className:"title",children:"Home Page"})}),Object(p.jsx)(a.b,{path:"people",element:Object(p.jsx)(M,{}),children:Object(p.jsx)(a.b,{path:":personSlug",element:Object(p.jsx)(M,{})})}),Object(p.jsx)(a.b,{path:"home",element:Object(p.jsx)(a.a,{to:"/"})}),Object(p.jsx)(a.b,{path:"*",element:Object(p.jsx)("h1",{className:"title",children:"Page not found"})})]})})})]})});Object(n.createRoot)(document.getElementById("root")).render(Object(p.jsx)(c.a,{children:Object(p.jsx)(_,{})}))}},[[40,1,2]]]);
//# sourceMappingURL=main.6313ff4c.chunk.js.map